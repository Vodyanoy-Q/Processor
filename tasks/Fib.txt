IN
POP RAX

PUSH 0
PUSH 1
POP RCX
POP RBX

PUSH RAX
PUSH 0

JNE ONE_COMPARE
PUSH RAX
OUT
HLT

ONE_COMPARE:
PUSH RAX
PUSH 1

JNE MAIN
PUSH RAX
OUT
HLT

MAIN:

CALL FIB
PUSH RCX
OUT
HLT

FIB:

PUSH RAX
PUSH 0
JNE CONTINUE
RET

CONTINUE:
PUSH RBX
PUSH RCX
ADD
PUSH RCX
POP RBX
POP RCX

PUSH RAX
PUSH -1
ADD
POP RAX

CALL FIB
RET
