MAIN:
IN
IN
IN

POP RCX
POP RBX
POP RAX

PUSH RAX
PUSH 0

JNE J_1
CALL SOLVE_LINEAR
HLT

J_1:
PUSH RCX
PUSH 0

JNE J_5
CALL C_IS_ZERO
HLT

J_5:
CALL SOLVE_SQUARE
HLT

SOLVE_SQUARE:
PUSH RBX
PUSH RBX
MUL
PUSH 4
PUSH RCX
PUSH RAX
MUL
MUL

SUB

POP RDX

PUSH RDX
PUSH 0

JB J_3

PUSH RDX
PUSH 0

JE J_4
PUSH RDX
SQRT
POP RDX
PUSH RBX
PUSH -1
MUL
POP [0]
PUSH [0]
PUSH -1
PUSH RDX
MUL
ADD
PUSH 2
PUSH RAX
MUL
DIV
OUT

PUSH [0]
PUSH RDX
ADD
PUSH 2
PUSH RAX
MUL
DIV
OUT
RET

J_4:
PUSH RBX
PUSH -1
MUL
PUSH 2
PUSH RAX
MUL
DIV
OUT
RET

J_3:
RET

SOLVE_LINEAR:
PUSH RBX
PUSH 0

JE J_2

PUSH RCX
PUSH -1
MUL
PUSH RBX
DIV
OUT

J_2:
RET

C_IS_ZERO:
PUSH 0
OUT

PUSH RBX
PUSH -1
MUL
PUSH RAX
DIV

OUT

RET
