MAIN:
IN
IN
IN

POP RCX
POP RBX
POP RAX

PUSH RAX
PUSH 0

JNE J_1
CALL LINEAR_SOLVER
HLT

J_1:
POP
POP
PUSH RCX
PUSH 0

JNE J_2
CALL C_IS_ZERO
HLT

J_2:
POP
POP
PUSH RBX
PUSH 0

JE J_3
CALL SQUARE_SOLVER
HLT

J_3:
POP
POP

PUSH RCX
PUSH 0

JBE J_4
HLT

J_4:
PUSH RCX
PUSH RAX
DIV

OUT

PUSH RCX
PUSH -1
MUL
PUSH RAX
DIV

OUT

HLT

SQUARE_SOLVER:
POP
POP

PUSH RBX
PUSH RBX
MUL

PUSH 4
PUSH RAX
MUL
PUSH RCX
MUL

SUB

SQRT
POP RDX

PUSH RBX
PUSH -1
MUL

PUSH RDX
SUB

PUSH 2
DIV

OUT

PUSH RBX
PUSH -1
MUL

PUSH RDX
PUSH -1
MUL
SUB

PUSH 2
DIV

OUT

RET

LINEAR_SOLVER:
POP
POP

PUSH RBX
PUSH 0

JE LINE_RET

POP
POP
PUSH RCX
PUSH -1
MUL
PUSH RBX
DIV

OUT

LINE_RET:
RET

C_IS_ZERO:
OUT
POP
PUSH RBX
PUSH -1
MUL
PUSH RAX
DIV

OUT

RET

